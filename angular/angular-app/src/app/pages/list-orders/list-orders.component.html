<div class="mdl-cell mdl-cell--8-col-desktop mdl-cell--8-col-tablet mdl-cell--4-col-phone">
  <base-card>
    <base-card-title>
      <h1 class="mdl-card__title-text">Liste des commandes</h1>
      <div class="mdl-layout-spacer"></div>
      <!-- disableRipple -->
      <mat-form-field>
        <mat-label>Actions</mat-label>
        <mat-select>
          <mat-option *ngFor="let action of actions">
            {{action.viewValue}}
          </mat-option>
        </mat-select>
      </mat-form-field>


      <div class="mdl-textfield-search mdl-js-textfield mdl-textfield--expandable search-table">
        <div class="mdl-textfield label-search">
          <input class="mdl-textfield__input" type="text" id="search2" (input)="setFilteredItems() "
            [(ngModel)]="filterValue" placeholder="Rechercher" />
          <label class="mdl-textfield__label" for="search2"></label>
        </div>
      </div>

      <base-pagination [numPage]="numPage" [currentPage]="currentPage" (changePage)="changePage($event)">
      </base-pagination>
    </base-card-title>
    <base-card-body class="no-padding">
      <table class="mdl-data-table mdl-js-data-table  sorting-table">
        <thead>
          <tr>
            <th>
              <mat-checkbox (change)="$event ? masterToggle() : null"
                [checked]="selection.hasValue() && isAllSelected()"
                [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
              </mat-checkbox>
            </th>
            <th *ngFor="let header of advancedHeaders ; let i = index" class="mdl-data-table__cell--non-numeric"
              (click)="changeSorting(header, i)">
              <span>{{ header.name }}</span>
              <i *ngIf="header.sort !== null " class="material-icons sorting"
                [class.asc]="header.sort === sortOrder.asc"
                [class.active]="header.sort === sortOrder.asc || header.sort === sortOrder.desc">sort</i>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of advancedTable  | slice:0:limit;" (click)="gotoDetails(row.taskId)">
            <td>
              <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
                [checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)"></mat-checkbox>
            </td>
            <td class="mdl-data-table__cell--non-numeric">{{ row.taskReference }}</td>
            <td class="mdl-data-table__cell--non-numeric">{{ row.client }}</td>
            <td class="type-articles mdl-data-table__cell--non-numeric" *ngFor="let cell of row.items">
              <span *ngFor="let item of cell.labels"
                class="label label--mini color--{{ typeArticleColors[item] }}">{{ item }}</span>
            </td>
            <td class="mdl-data-table__cell--non-numeric">{{ row.date.slice(0,10) }}</td>
            <td class="mdl-data-table__cell--non-numeric" *ngIf="row.serviceTime<100">
              <mat-progress-bar mode="determinate" color="warn" value={{row.serviceTime}}></mat-progress-bar>
            </td>

            <td class="mdl-data-table__cell--non-numeric task-done" *ngIf="row.serviceTime >= 100">
              <i class="commande-complete material-icons">done</i>
              <span>Complete</span>
            </td>
            <td class="mdl-data-table__cell--non-numeric">{{ row.contact.person }}</td>
            <td class="mdl-data-table__cell--non-numeric">
              <button
                class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect button--colored-teal dialog-button"
                (click)="openDialog(row);$event.stopPropagation();">Transf√©rer
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </base-card-body>
  </base-card>
</div>

<div class="mdl-cell mdl-cell--4-col-desktop mdl-cell--4-col-tablet mdl-cell--4-col-phone">
  <base-card class="bloc-type-cmd">
    <base-card-title>
      <h2 class="mdl-card__title-text">Type de commandes</h2>
    </base-card-title>
    <base-card-body>
      <app-pie-chart></app-pie-chart>
    </base-card-body>
  </base-card>

  <base-card class="card-oder-by-date">
    <base-card-title>
      <h2 class="mdl-card__title-text">Commandes par jour</h2>
    </base-card-title>
    <base-card-body>
      <app-discrete-bar-chart></app-discrete-bar-chart>
    </base-card-body>
  </base-card>

</div>
